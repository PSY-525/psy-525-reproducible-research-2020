---
title: "Using the `powerbydesign` package"
output:
  html_document:
    toc: true
    toc_float: true
    toc_depth: 3
    code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.align = "center")
```

## Purpose

This document describes how to use the [`powerbydesign`](https://cran.r-project.org/web/packages/powerbydesign/) R package for determining the power of ANOVA designs.

## Prerequisites

1. Install the `powerbydesign` package via `install.packages("powerbydesign")`.
    
## Procedure

We'll first work through the examples in the [package manual](https://cran.r-project.org/web/packages/powerbydesign/powerbydesign.pdf).

This code is slow to run because of number of bootstraps ($n=1,000$).
Also, it is important to enter expected values for the conditions.

```{r}
design <- powerbydesign::design.anova(
  between = list(
    age = c("young", "old"),
    sex = c("male", "female")
  ),
  within = list(condition = c("cond1", "cond2", "cond3")),
  default_within_correlation = 0.7
)

power_by_samplesize <- powerbydesign::boot.power.anova(
  design,
  n_from = 40,
  n_to = 60,
  num_iterations_bootstrap = 1000
)
plot(power_by_samplesize,
     crit_power = 0.9,
     plot_dir = "power_plots")
```
